#
# Configure oh-my-zsh
#

- name: Clone oh-my-zsh base
  git:
    repo: "{{ ohmyzsh_clone_url }}"
    dest: "{{ user_home }}/.oh-my-zsh"

- name: Empty oh-my-zsh custom directory
  file:
    state: absent
    path: "{{ user_home }}/.oh-my-zsh/custom"

- name: Clone oh-my-zsh custom configs
  git:
    repo: "{{ ohmyzsh_custom_url }}"
    dest: "{{ user_home }}/.oh-my-zsh/custom"

- name: Reset oh-my-zsh files
  command: git reset --hard HEAD
  args:
    chdir: "{{ user_home }}/.oh-my-zsh"

- name: Install dotzshrc
  template:
    src: dotzshrc.j2
    dest: "{{ user_home }}/.zshrc"
